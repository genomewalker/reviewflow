<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - Rebuttr Documentation</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/docs.css">
</head>
<body>
    <nav class="doc-nav" id="nav">
        <div class="nav-container">
            <a href="../index.html" class="logo">
                <span class="logo-mark">RF</span>
                <span class="logo-text">Rebuttr</span>
            </a>
            <ul class="nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../tutorial.html">Tutorial</a></li>
                <li><a href="https://github.com/genomewalker/rebuttr">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <div class="doc-layout">
        <aside class="doc-sidebar">
            <h4>Getting started</h4>
            <a href="../guides/installation.html">Installation</a>
            <a href="../guides/quickstart.html">Quick start</a>
            <a href="../tutorial.html">Tutorial</a>

            <h4>User guide</h4>
            <a href="../guides/importing.html">Importing reviews</a>
            <a href="../guides/ai-features.html">AI features</a>
            <a href="../guides/exporting.html">Exporting</a>
            <a href="../guides/multi-paper.html">Multi-paper</a>

            <h4>Configuration</h4>
            <a href="../guides/configuration.html">Configuration</a>
            <a href="../guides/cli-reference.html">CLI reference</a>
            <a href="../guides/skills.html">AI skills</a>

            <h4>Reference</h4>
            <a href="index.html" class="active">API reference</a>
            <a href="../guides/json-format.html">JSON format</a>
            <a href="../guides/troubleshooting.html">Troubleshooting</a>
        </aside>

        <main class="doc-content">
            <h1>API reference</h1>
            <p class="doc-subtitle">REST API endpoints for programmatic access to Rebuttr.</p>

            <div class="alert alert-info">
                <h5>Base URL</h5>
                <p>All endpoints are relative to <code>http://localhost:3001</code></p>
            </div>

            <h2 id="overview">Overview</h2>
            <p>Rebuttr exposes a REST API for interacting with papers, comments, and AI features. The server runs on port 3001 by default.</p>

            <h2 id="config">Configuration</h2>

            <h3>GET /config</h3>
            <p>Get the current configuration settings.</p>

            <div class="code-block">
                <div class="code-header">
                    <span>Response</span>
                </div>
                <div class="code-content">
{
  <span class="key">"model"</span>: <span class="string">"github-copilot/gpt-5-mini"</span>,
  <span class="key">"agent"</span>: <span class="string">"general"</span>,
  <span class="key">"variant"</span>: <span class="string">"high"</span>,
  <span class="key">"available_models"</span>: [...],
  <span class="key">"available_agents"</span>: [...],
  <span class="key">"available_variants"</span>: [...]
}
                </div>
            </div>

            <h3>POST /config</h3>
            <p>Update configuration settings.</p>

            <table class="doc-table">
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>model</code></td>
                    <td>string</td>
                    <td>AI model identifier</td>
                </tr>
                <tr>
                    <td><code>agent</code></td>
                    <td>string</td>
                    <td>Agent type (plan, build, explore, general)</td>
                </tr>
                <tr>
                    <td><code>variant</code></td>
                    <td>string</td>
                    <td>Reasoning effort level</td>
                </tr>
            </table>

            <h2 id="papers">Papers</h2>

            <h3>GET /api/papers</h3>
            <p>List all papers in the database.</p>

            <div class="code-block">
                <div class="code-header">
                    <span>Response</span>
                </div>
                <div class="code-content">
{
  <span class="key">"papers"</span>: [
    {
      <span class="key">"id"</span>: <span class="string">"2ad87606"</span>,
      <span class="key">"title"</span>: <span class="string">"Two-million-year-old microbial communities..."</span>,
      <span class="key">"created_at"</span>: <span class="string">"2025-01-20T12:00:00Z"</span>,
      <span class="key">"status"</span>: <span class="string">"ready"</span>
    }
  ]
}
                </div>
            </div>

            <h3>GET /api/papers/incomplete</h3>
            <p>List papers that are still being processed.</p>

            <h3>DELETE /api/papers/:id</h3>
            <p>Delete a paper and all its associated data.</p>

            <table class="doc-table">
                <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>id</code> <em>(required)</em></td>
                    <td>string</td>
                    <td>Paper ID</td>
                </tr>
            </table>

            <h2 id="comments">Comments</h2>

            <h3>GET /db/comments</h3>
            <p>Load all comments for a paper.</p>

            <table class="doc-table">
                <tr>
                    <th>Query Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>paper</code> <em>(required)</em></td>
                    <td>string</td>
                    <td>Paper ID</td>
                </tr>
            </table>

            <h3>POST /db/comments</h3>
            <p>Save all comments for a paper.</p>

            <table class="doc-table">
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>paperId</code> <em>(required)</em></td>
                    <td>string</td>
                    <td>Paper ID</td>
                </tr>
                <tr>
                    <td><code>comments</code> <em>(required)</em></td>
                    <td>array</td>
                    <td>Array of comment objects</td>
                </tr>
            </table>

            <h2 id="experts">Expert Discussions</h2>

            <h3>GET /db/experts</h3>
            <p>Load expert discussions for a paper.</p>

            <table class="doc-table">
                <tr>
                    <th>Query Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>paper</code> <em>(required)</em></td>
                    <td>string</td>
                    <td>Paper ID</td>
                </tr>
            </table>

            <h3>POST /db/expert</h3>
            <p>Save an expert discussion for a comment.</p>

            <table class="doc-table">
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>paperId</code> <em>(required)</em></td>
                    <td>string</td>
                    <td>Paper ID</td>
                </tr>
                <tr>
                    <td><code>commentId</code> <em>(required)</em></td>
                    <td>string</td>
                    <td>Comment ID</td>
                </tr>
                <tr>
                    <td><code>discussion</code> <em>(required)</em></td>
                    <td>object</td>
                    <td>Expert discussion data</td>
                </tr>
            </table>

            <h2 id="export">Export</h2>

            <h3>POST /papers/:id/export/ai-rebuttal</h3>
            <p>Generate an AI-powered rebuttal letter as a Word document.</p>

            <table class="doc-table">
                <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>id</code> <em>(required)</em></td>
                    <td>string</td>
                    <td>Paper ID</td>
                </tr>
            </table>

            <div class="alert alert-success">
                <h5>Response</h5>
                <p>Returns a <code>.docx</code> file download.</p>
            </div>

            <h2 id="state">App State</h2>

            <h3>GET /db/state/:key</h3>
            <p>Load saved application state by key.</p>

            <h3>POST /db/state</h3>
            <p>Save application state.</p>

            <table class="doc-table">
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>key</code> <em>(required)</em></td>
                    <td>string</td>
                    <td>State key identifier</td>
                </tr>
                <tr>
                    <td><code>value</code> <em>(required)</em></td>
                    <td>any</td>
                    <td>State data to save</td>
                </tr>
            </table>

            <h2 id="errors">Error Handling</h2>
            <p>All endpoints return JSON error responses:</p>

            <div class="code-block">
                <div class="code-header">
                    <span>Error Response</span>
                </div>
                <div class="code-content">
{
  <span class="key">"error"</span>: <span class="string">"Error message describing what went wrong"</span>
}
                </div>
            </div>

            <p>HTTP status codes:</p>
            <ul>
                <li><code>200</code> - Success</li>
                <li><code>400</code> - Bad request (missing/invalid parameters)</li>
                <li><code>404</code> - Resource not found</li>
                <li><code>500</code> - Server error</li>
            </ul>

            <div class="alert alert-warning">
                <h5>Authentication</h5>
                <p>The Rebuttr API is designed for local use and does not require authentication. Do not expose the server to the public internet.</p>
            </div>

            <h2>Next Steps</h2>
            <ul>
                <li><a href="../guides/json-format.html">JSON format</a> - Data structure details</li>
                <li><a href="../guides/configuration.html">Configuration</a> - Server settings</li>
                <li><a href="../guides/troubleshooting.html">Troubleshooting</a> - Common issues</li>
            </ul>
        </main>
    </div>

    <footer class="doc-footer">
        <p>
            <a href="../guides/index.html">Documentation</a> |
            <a href="https://github.com/genomewalker/rebuttr">GitHub</a> |
            <a href="../guides/troubleshooting.html">Troubleshooting</a>
        </p>
    </footer>

    <script>
        // Nav scroll effect
        const nav = document.getElementById('nav');
        window.addEventListener('scroll', () => {
            nav.classList.toggle('scrolled', window.scrollY > 50);
        });
    </script>
</body>
</html>
